<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Magyar Irodalom</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body { background-color:#1c1c1c; color:#eee; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
.kolto-lista .list-group-item { background:#2a2a2a; color:#eee; cursor:pointer; }
.kolto-lista .list-group-item:hover { background:#3a3a3a; }
.vers-box { background:#2e2e2e; padding:15px; margin-bottom:15px; border-radius:8px; }
.fejlec { background:#272727; padding:15px; font-style:italic; }
.footer { background:#272727; padding:15px; text-align:center; font-size:0.9rem; }
</style>
</head>
<body>

<nav class="fejlec text-center" id="fejlecId">
  <div id="fejlecSzoveg">„...vers idézet...”</div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-lg-3 col-md-4 kolto-lista">
      <ul class="list-group" id="koltokUl"></ul>
    </div>
    <div class="col-lg-9 col-md-8" id="mainContent">
      <div id="versekRandom"></div>
    </div>
  </div>
</div>

<footer class="footer">
  Szakács Tamás – 2026.01.28
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Költők betöltése
async function loadKoltok() {
  const res = await fetch('api.php/kolto');
  const data = await res.json();
  const ul = document.getElementById('koltokUl');
  ul.innerHTML = '';
  data.forEach(k => {
    const li = document.createElement('li');
    li.className = 'list-group-item';
    li.textContent = k.nev;
    li.onclick = () => loadKolto(k.id);
    ul.appendChild(li);
  });
}

// Random versek betöltése (4 darab)
async function loadRandomVerse() {
  const res = await fetch('api.php/versek/4');
  const data = await res.json();
  const container = document.getElementById('versekRandom');
  container.innerHTML = '';
  data.forEach(v => {
    const div = document.createElement('div');
    div.className = 'vers-box';
    div.innerHTML = `<h5>${v.cim}</h5>
                     <p><strong>${v.kolto_nev}</strong></p>
                     <p>${v.versszakok[0].tartalom.split('\n').slice(0,4).join('<br>')}</p>`;
    container.appendChild(div);
  });
}

// Adott költő betöltése
async function loadKolto(id) {
  const res = await fetch('api.php/kolto/' + id);
  const data = await res.json();
  const container = document.getElementById('versekRandom');
  container.innerHTML = `<h3>${data.nev}</h3>
                         <p>Született: ${data.szuletesi_datum}, ${data.szuletesi_hely}</p>
                         <p>Elhunyt: ${data.halalozi_datum || ''}, ${data.halalozi_hely || ''}</p>
                         <p>${data.eletrajz}</p>
                         <h5>Versek:</h5>`;
  data.versek.forEach(v => {
    const div = document.createElement('div');
    div.className = 'vers-box';
    div.innerHTML = `<h6>${v.cim} (${v.megjelenes_eve})</h6>`;
    container.appendChild(div);
  });
}

// Fejléc idézet változtatása
async function fejlecRandom() {
  const res = await fetch('api.php/versek/1');
  const data = await res.json();
  const v = data[0];
  const szoveg = v.versszakok[0].tartalom.split('\n').slice(0,4).join(' ');
  document.getElementById('fejlecSzoveg').innerHTML = `„${szoveg}”<br><small>${v.kolto_nev} – ${v.cim} (${v.megjelenes_eve})</small>`;
}

// Init
loadKoltok();
loadRandomVerse();
fejlecRandom();
setInterval(fejlecRandom, 30000); // fél percenként
</script>
</body>
</html>
